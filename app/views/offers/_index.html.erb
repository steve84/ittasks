<%- model_class = Offer -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>
<% if action_name.eql?('my_offers') || !user_signed_in? || current_user.id != @task.principal_id || @offers.size == 0 %>
	<table class="table table-striped">
		<thead>
			<tr>
			  <th><%= model_class.human_attribute_name(:id) %></th>
			  <th><%= model_class.human_attribute_name(:remark) %></th>
			  <th><%= model_class.human_attribute_name(:amount) %></th>
			  <th><%= model_class.human_attribute_name(:task_id) %></th>
			  <th><%= model_class.human_attribute_name(:user_id) %></th>
			  <th><%= model_class.human_attribute_name(:created_at) %></th>
			  <th><%=t '.actions', :default => t("helpers.actions") %></th>
			</tr>
		</thead>
		<tbody>
			<% @offers.each do |offer| %>
				<tr>
				  <td><%= link_to offer.id, task_offer_path(offer.task_id, offer) %></td>
				  <td><%= offer.remark %></td>
				  <td><%= offer.amount %></td>
				  <td><%= offer.task_id %></td>
				  <td><%= offer.user_id %></td>
				  <td><%=l offer.created_at %></td>
				  <td>
				    <%= link_to t('.show', :default => t("helpers.links.show")),
				                task_path(offer.task_id), :class => 'btn btn-mini' %>
				    <%= link_to t('.edit', :default => t("helpers.links.edit")),
				                edit_task_offer_path(offer.task_id, offer), :class => 'btn btn-mini' %>
				    <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
				                task_offer_path(offer.task_id, offer),
				                :method => :delete,
				                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
				                :class => 'btn btn-mini btn-danger' %>
				  </td>
				</tr>
			<% end %>
		</tbody>
	</table>
<% else %>
	<%= form_tag(accept_offer_path(params[:id])) do %>
		<table class="table table-striped">
			<thead>
				<tr>
				  <th><%= model_class.human_attribute_name(:id) %></th>
				  <th>Radio button</th>
				  <th><%= model_class.human_attribute_name(:remark) %></th>
				  <th><%= model_class.human_attribute_name(:amount) %></th>
				  <th><%= model_class.human_attribute_name(:task_id) %></th>
				  <th><%= model_class.human_attribute_name(:user_id) %></th>
				  <th><%= model_class.human_attribute_name(:created_at) %></th>
				  <th><%=t '.actions', :default => t("helpers.actions") %></th>
				</tr>
			</thead>
			<tbody>
				<% @offers.each do |offer| %>
					<tr>
					  <td><%= link_to offer.id, task_offer_path(offer.task_id, offer) %></td>
					  <td><%= radio_button_tag(:selected_offer, offer.id) %></td>
					  <td><%= offer.remark %></td>
					  <td><%= offer.amount %></td>
					  <td><%= offer.task_id %></td>
					  <td><%= offer.user_id %></td>
					  <td><%=l offer.created_at %></td>
					  <td>
					    <%= link_to t('.show', :default => t("helpers.links.show")),
					                task_path(offer.task_id), :class => 'btn btn-mini' %>
					    <%= link_to t('.edit', :default => t("helpers.links.edit")),
					                edit_task_offer_path(offer.task_id, offer), :class => 'btn btn-mini' %>
					    <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
					                task_offer_path(offer.task_id, offer),
					                :method => :delete,
					                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
					                :class => 'btn btn-mini btn-danger' %>
					  </td>
					</tr>
				<% end %>
			</tbody>
		</table>
		<%= submit_tag "Accept offer",
				:data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
				:class => 'btn btn'
		%>
	<% end %>
<% end %>
